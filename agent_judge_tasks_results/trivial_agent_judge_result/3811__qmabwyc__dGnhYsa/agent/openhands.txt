/opt/openhands-venv/lib/python3.13/site-packages/openhands/core/config/config_utils.py:56: DeprecationWarning: deprecated
  field_value = getattr(model, name)
/opt/openhands-venv/lib/python3.13/site-packages/openhands/core/config/utils.py:69: DeprecationWarning: deprecated
  field_value = getattr(sub_config, field_name)
/opt/openhands-venv/lib/python3.13/site-packages/openhands/core/config/utils.py:380: DeprecationWarning: deprecated
  if cfg.workspace_base is not None or cfg.workspace_mount_path is not None:
[92m23:08:58 - openhands:INFO[0m: llm_registry.py:87 - [LLM registry 81af5ab2-2669-4d1a-bfdb-1cf0d8abc516]: Registering service for agent
[92m23:08:58 - openhands:WARNING[0m: local_runtime.py:159 - Initializing LocalRuntime. WARNING: NO SANDBOX IS USED. This is an experimental feature, please report issues to https://github.com/All-Hands-AI/OpenHands/issues. `run_as_openhands` will be ignored since the current user will be used to launch the server. We highly recommend using a sandbox (eg. DockerRuntime) unless you are running in a controlled environment.
User ID: 0. Username: None.
[92m23:08:58 - openhands:WARNING[0m: local_runtime.py:250 - Workspace base path is set to /workspace. It will be used as the path for the agent to run in. Be careful, the agent can EDIT files in this directory!
[92m23:08:58 - openhands:INFO[0m: local_runtime.py:267 - Using workspace directory: /workspace
[92m23:08:58 - openhands:INFO[0m: local_runtime.py:632 - Creating a server
[92m23:08:58 - openhands:INFO[0m: local_runtime.py:672 - Starting server with command: ['/opt/openhands-venv/bin/python', '-u', '-m', 'openhands.runtime.action_execution_server', '32360', '--working-dir', '/workspace', '--plugins', 'agent_skills', 'jupyter', '--username', 'root', '--user-id', '0', '--no-enable-browser']
[92m23:08:58 - openhands:INFO[0m: local_runtime.py:365 - [runtime 0c2c53d1-2d76-4a-998092bb6ade6fc] Waiting for server to become ready at http://localhost:32360...
[92m23:09:04 - openhands:INFO[0m: local_runtime.py:714 - server: [92m23:09:04 - openhands:WARNING[0m: action_execution_server.py:654 - Starting Action Execution Server
[92m23:09:04 - openhands:INFO[0m: local_runtime.py:714 - server: [92m23:09:04 - openhands:INFO[0m: action_execution_server.py:680 - Starting file viewer server
[92m23:09:04 - openhands:INFO[0m: local_runtime.py:714 - server: [92m23:09:04 - openhands:INFO[0m: file_viewer_server.py:92 - File viewer server URL saved to /tmp/oh-server-url: http://localhost:32431
[92m23:09:04 - openhands:INFO[0m: local_runtime.py:714 - server: [92m23:09:04 - openhands:INFO[0m: file_viewer_server.py:93 - Starting file viewer server on port 32431
[92m23:09:04 - openhands:INFO[0m: local_runtime.py:714 - server: [92m23:09:04 - openhands:INFO[0m: action_execution_server.py:685 - File viewer server started at http://localhost:32431
[92m23:09:04 - openhands:INFO[0m: local_runtime.py:714 - server: /opt/openhands-venv/lib/python3.13/site-packages/websockets/legacy/__init__.py:6: DeprecationWarning: websockets.legacy is deprecated; see https://websockets.readthedocs.io/en/stable/howto/upgrade.html for upgrade instructions
[92m23:09:04 - openhands:INFO[0m: local_runtime.py:714 - server: warnings.warn(  # deprecated in 14.0 - 2024-11-09
[92m23:09:04 - openhands:INFO[0m: local_runtime.py:714 - server: /opt/openhands-venv/lib/python3.13/site-packages/uvicorn/protocols/websockets/websockets_impl.py:17: DeprecationWarning: websockets.server.WebSocketServerProtocol is deprecated
[92m23:09:04 - openhands:INFO[0m: local_runtime.py:714 - server: from websockets.server import WebSocketServerProtocol
[92m23:09:04 - openhands:INFO[0m: local_runtime.py:714 - server: [92m23:09:04 - openhands:INFO[0m: action_execution_server.py:700 - Initializing ActionExecutor...
[92m23:09:04 - openhands:INFO[0m: local_runtime.py:714 - server: [92m23:09:04 - openhands:INFO[0m: action_execution_server.py:217 - No max memory limit set, using all available system memory
[92m23:09:05 - openhands:INFO[0m: local_runtime.py:714 - server: [92m23:09:05 - openhands:INFO[0m: action_execution_server.py:232 - Browser environment is not enabled in config
[92m23:10:58 - openhands:ERROR[0m: logger.py:360 - Uncaught exception
Traceback (most recent call last):
  File "/opt/openhands-venv/lib/python3.13/site-packages/httpx/_transports/default.py", line 101, in map_httpcore_exceptions
    yield
  File "/opt/openhands-venv/lib/python3.13/site-packages/httpx/_transports/default.py", line 250, in handle_request
    resp = self._pool.handle_request(req)
  File "/opt/openhands-venv/lib/python3.13/site-packages/httpcore/_sync/connection_pool.py", line 256, in handle_request
    raise exc from None
  File "/opt/openhands-venv/lib/python3.13/site-packages/httpcore/_sync/connection_pool.py", line 236, in handle_request
    response = connection.handle_request(
        pool_request.request
    )
  File "/opt/openhands-venv/lib/python3.13/site-packages/httpcore/_sync/connection.py", line 101, in handle_request
    raise exc
  File "/opt/openhands-venv/lib/python3.13/site-packages/httpcore/_sync/connection.py", line 78, in handle_request
    stream = self._connect(request)
  File "/opt/openhands-venv/lib/python3.13/site-packages/httpcore/_sync/connection.py", line 124, in _connect
    stream = self._network_backend.connect_tcp(**kwargs)
  File "/opt/openhands-venv/lib/python3.13/site-packages/httpcore/_backends/sync.py", line 207, in connect_tcp
    with map_exceptions(exc_map):
         ~~~~~~~~~~~~~~^^^^^^^^^
  File "/root/.local/share/uv/python/cpython-3.13.9-linux-x86_64-gnu/lib/python3.13/contextlib.py", line 162, in __exit__
    self.gen.throw(value)
    ~~~~~~~~~~~~~~^^^^^^^
  File "/opt/openhands-venv/lib/python3.13/site-packages/httpcore/_exceptions.py", line 14, in map_exceptions
    raise to_exc(exc) from exc
httpcore.ConnectError: [Errno 111] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "/opt/openhands-venv/lib/python3.13/site-packages/tenacity/__init__.py", line 480, in __call__
    result = fn(*args, **kwargs)
  File "/opt/openhands-venv/lib/python3.13/site-packages/openhands/runtime/impl/local/local_runtime.py", line 427, in _wait_until_alive
    response = self.session.get(f'{self.api_url}/alive')
  File "/opt/openhands-venv/lib/python3.13/site-packages/openhands/utils/http_session.py", line 45, in get
    return self.request('GET', *args, **kwargs)
           ~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/openhands-venv/lib/python3.13/site-packages/openhands/utils/http_session.py", line 31, in request
    return CLIENT.request(*args, **kwargs)
           ~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "/opt/openhands-venv/lib/python3.13/site-packages/httpx/_client.py", line 825, in request
    return self.send(request, auth=auth, follow_redirects=follow_redirects)
           ~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/opt/openhands-venv/lib/python3.13/site-packages/httpx/_client.py", line 914, in send
    response = self._send_handling_auth(
        request,
    ...<2 lines>...
        history=[],
    )
  File "/opt/openhands-venv/lib/python3.13/site-packages/httpx/_client.py", line 942, in _send_handling_auth
    response = self._send_handling_redirects(
        request,
        follow_redirects=follow_redirects,
        history=history,
    )
  File "/opt/openhands-venv/lib/python3.13/site-packages/httpx/_client.py", line 979, in _send_handling_redirects
    response = self._send_single_request(request)
  File "/opt/openhands-venv/lib/python3.13/site-packages/httpx/_client.py", line 1014, in _send_single_request
    response = transport.handle_request(request)
  File "/opt/openhands-venv/lib/python3.13/site-packages/httpx/_transports/default.py", line 249, in handle_request
    with map_httpcore_exceptions():
         ~~~~~~~~~~~~~~~~~~~~~~~^^
  File "/root/.local/share/uv/python/cpython-3.13.9-linux-x86_64-gnu/lib/python3.13/contextlib.py", line 162, in __exit__
    self.gen.throw(value)
    ~~~~~~~~~~~~~~^^^^^^^
  File "/opt/openhands-venv/lib/python3.13/site-packages/httpx/_transports/default.py", line 118, in map_httpcore_exceptions
    raise mapped_exc(message) from exc
httpx.ConnectError: [Errno 111] Connection refused

The above exception was the direct cause of the following exception:

Traceback (most recent call last):
  File "<frozen runpy>", line 198, in _run_module_as_main
  File "<frozen runpy>", line 88, in _run_code
  File "/opt/openhands-venv/lib/python3.13/site-packages/openhands/core/main.py", line 311, in <module>
    asyncio.run(
    ~~~~~~~~~~~^
        run_controller(
        ^^^^^^^^^^^^^^^
    ...<6 lines>...
        )
        ^
    )
    ^
  File "/root/.local/share/uv/python/cpython-3.13.9-linux-x86_64-gnu/lib/python3.13/asyncio/runners.py", line 195, in run
    return runner.run(main)
           ~~~~~~~~~~^^^^^^
  File "/root/.local/share/uv/python/cpython-3.13.9-linux-x86_64-gnu/lib/python3.13/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^
  File "/root/.local/share/uv/python/cpython-3.13.9-linux-x86_64-gnu/lib/python3.13/asyncio/base_events.py", line 725, in run_until_complete
    return future.result()
           ~~~~~~~~~~~~~^^
  File "/opt/openhands-venv/lib/python3.13/site-packages/openhands/core/main.py", line 121, in run_controller
    call_async_from_sync(runtime.connect)
    ~~~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^
  File "/opt/openhands-venv/lib/python3.13/site-packages/openhands/utils/async_utils.py", line 51, in call_async_from_sync
    result = future.result()
  File "/root/.local/share/uv/python/cpython-3.13.9-linux-x86_64-gnu/lib/python3.13/concurrent/futures/_base.py", line 456, in result
    return self.__get_result()
           ~~~~~~~~~~~~~~~~~^^
  File "/root/.local/share/uv/python/cpython-3.13.9-linux-x86_64-gnu/lib/python3.13/concurrent/futures/_base.py", line 401, in __get_result
    raise self._exception
  File "/root/.local/share/uv/python/cpython-3.13.9-linux-x86_64-gnu/lib/python3.13/concurrent/futures/thread.py", line 59, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/opt/openhands-venv/lib/python3.13/site-packages/openhands/utils/async_utils.py", line 41, in run
    return asyncio.run(arun())
           ~~~~~~~~~~~^^^^^^^^
  File "/root/.local/share/uv/python/cpython-3.13.9-linux-x86_64-gnu/lib/python3.13/asyncio/runners.py", line 195, in run
    return runner.run(main)
           ~~~~~~~~~~^^^^^^
  File "/root/.local/share/uv/python/cpython-3.13.9-linux-x86_64-gnu/lib/python3.13/asyncio/runners.py", line 118, in run
    return self._loop.run_until_complete(task)
           ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^^^^^^
  File "/root/.local/share/uv/python/cpython-3.13.9-linux-x86_64-gnu/lib/python3.13/asyncio/base_events.py", line 725, in run_until_complete
    return future.result()
           ~~~~~~~~~~~~~^^
  File "/opt/openhands-venv/lib/python3.13/site-packages/openhands/utils/async_utils.py", line 34, in arun
    result = await coro
             ^^^^^^^^^^
  File "/opt/openhands-venv/lib/python3.13/site-packages/openhands/runtime/impl/local/local_runtime.py", line 368, in connect
    await call_sync_from_async(self._wait_until_alive)
  File "/opt/openhands-venv/lib/python3.13/site-packages/openhands/utils/async_utils.py", line 17, in call_sync_from_async
    result = await coro
             ^^^^^^^^^^
  File "/root/.local/share/uv/python/cpython-3.13.9-linux-x86_64-gnu/lib/python3.13/concurrent/futures/thread.py", line 59, in run
    result = self.fn(*self.args, **self.kwargs)
  File "/opt/openhands-venv/lib/python3.13/site-packages/openhands/utils/async_utils.py", line 16, in <lambda>
    coro = loop.run_in_executor(None, lambda: fn(*args, **kwargs))
                                              ~~^^^^^^^^^^^^^^^^^
  File "/opt/openhands-venv/lib/python3.13/site-packages/tenacity/__init__.py", line 338, in wrapped_f
    return copy(f, *args, **kw)
  File "/opt/openhands-venv/lib/python3.13/site-packages/tenacity/__init__.py", line 477, in __call__
    do = self.iter(retry_state=retry_state)
  File "/opt/openhands-venv/lib/python3.13/site-packages/tenacity/__init__.py", line 378, in iter
    result = action(retry_state)
  File "/opt/openhands-venv/lib/python3.13/site-packages/tenacity/__init__.py", line 421, in exc_check
    raise retry_exc from fut.exception()
tenacity.RetryError: RetryError[<Future at 0x78f2712ad8d0 state=finished raised ConnectError>]
[92m23:11:03 - openhands:INFO[0m: local_runtime.py:727 - server log output thread finished.
